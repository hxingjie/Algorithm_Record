```c++
class Solution {
public:
    vector<bool> isVisited;
    vector<int> color;
    bool isOK = true;
    void traverse(vector<vector<int>>& graph, int n, int source){
        if (!isOK) return;
        if (isVisited[n]){
            if (source == color[n]) isOK = false;
            return;
        }
        
        isVisited[n] = true;
        if (source == -1) color[n] = 0;
        else color[n] = source == 0 ? 1 : 0;
        
        for (int i = 0; i < graph[n].size(); ++i)
            traverse(graph, graph[n][i], color[n]);
        
    }
    bool isBipartite(vector<vector<int>>& graph) {
        isVisited = vector<bool>(graph.size(), false);
        color = vector<int>(graph.size(), -1);// 0, 1
        
        for (int i = 0; i < graph.size(); i++)
            traverse(graph, i, -1);

        return isOK;
    }
};
```
