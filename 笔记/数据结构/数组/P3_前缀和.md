# 前缀和

前缀和技巧适用于快速、频繁地计算一个索引区间内的元素之和

## 区域和检索 - 数组不可变
https://leetcode.cn/problems/range-sum-query-immutable/description/
```c++
class NumArray {
public:
    NumArray(vector<int>& nums) {
        m_PreSumArray.reserve(nums.size()); // 开辟空间
        m_PreSumArray.push_back(nums[0]);
        for (int i = 1; i < nums.size(); i++) {
            m_PreSumArray.push_back(nums[i] + m_PreSumArray[i-1]);
        }
    }
    
    int sumRange(int left, int right) {
        if (left == 0)
            return m_PreSumArray[right];
        else
            return m_PreSumArray[right] - m_PreSumArray[left-1];
    }
private:
    vector<int> m_PreSumArray;
};

/**
 * Your NumArray object will be instantiated and called as such:
 * NumArray* obj = new NumArray(nums);
 * int param_1 = obj->sumRange(left,right);
 */
```

## 二维区域和检索 - 矩阵不可变
https://leetcode.cn/problems/range-sum-query-2d-immutable/description/
```c++
class NumMatrix {
public:
    NumMatrix(vector<vector<int>>& matrix) 
        : m_PreSumMatrix(vector<vector<long long>>(matrix.size()+1, vector<long long>(matrix[0].size()+1, 0))) {
        for (int i = 1; i < m_PreSumMatrix.size(); i++) {
            for (int j = 1; j < m_PreSumMatrix[0].size(); j++) {
                m_PreSumMatrix[i][j] = matrix[i-1][j-1]
                    + m_PreSumMatrix[i-1][j] + m_PreSumMatrix[i][j-1]
                    - m_PreSumMatrix[i-1][j-1];
            }
        }
    }
    
    int sumRegion(int row1, int col1, int row2, int col2) {
        row1 += 1;
        col1 += 1;
        row2 += 1;
        col2 += 1;
        return m_PreSumMatrix[row2][col2] 
            - m_PreSumMatrix[row1-1][col2] - m_PreSumMatrix[row2][col1-1]
            + m_PreSumMatrix[row1-1][col1-1];
    }
private:
    vector<vector<long long>> m_PreSumMatrix;
};
```
